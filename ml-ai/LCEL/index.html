<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LCEL (LangChain Expression Language) 1</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/study.css">
    <link rel="stylesheet" href="/assets/css/sidebar.css">
    <link rel="stylesheet" href="/assets/css/header.css">
    <link rel="stylesheet" href="/assets/css/banner.css">
    <link rel="stylesheet" href="/assets/css/sections.css">
    <link rel="stylesheet" href="/assets/css/post.css">
    <link rel="stylesheet" href="/assets/css/categories.css">
    <link rel="stylesheet" href="/assets/css/projects.css">
</head>
<body>
    <div class="container">
        <!-- ВѓгВЮ┤вЊюв░ћ -->
        <aside class="sidebar">
    <img src="/assets/images/avatar.png" alt="Duri" class="profile-image">
    <div class="profile-info">
        <h2>Duri</h2>
        <p>╦Ќ╦Ј╦І РІє№йА­ќд╣ ╦џ ­ЊЄ╝ ╦џ№йАРІє РЮђ╦ќ┬░</p>
        <p>ВўЏвѓаВЌљ 
 вЇ░ВЮ┤ьё░ ВЌћВДђвІѕВќ┤Ж░ђ ВъѕВЌЄВіе.. в░▒ВЌћвЊю Вёюв▓ёвЈё вДївЊцЖ│а ВЮИьћёвЮ╝вЈё ЖхгВХЋьЋўЖ│а вЇ░ВЮ┤ьё░ вХёВёЮвЈё ьќѕВіе.. </p>
    </div>
    
    <div class="contact-links">
        <div class="profile-divider">
    РађРађРађРађРађРађРбђРАцРБцРБђРађРађРађРађРађРађРађРађРађРађРБђРАђРађРађРађРађРађРађ
    РађРађРађРађРађРбђРАЈРађРађРаѕРа│РБёРађРађРађРађРађРБђРа┤РаІРаЅРаЅРАєРађРађРађРађРађ
    РађРађРађРађРађРбИРађРађРађРађРађРаѕРаЅРаЅРаЎРаЊРаџРаЂРађРађРађРађРБ┐РађРађРађРађРађ
    РађРађРађРађРбђРаъРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРађРа╣РБёРађРађРађРађ
    РађРађРађРађРАъРађРађРађРађРађРаХРађРађРађРађРађРађРадРађРађРађРађРађРаИРАєРађРађРађ
    РбаРБцРБХРБЙРБДРБцРБцРБђРАђРађРађРађРађРаѕРађРађРађРбђРАцРа┤РаХРацРбцРАђРБДРБђРБђРађ
    Ра╗РаХРБЙРаЂРађРађРађРађРаЎРБєРађРађРађРађРађРађРБ░РаІРађРађРађРађРађРб╣РБ┐РБГРБйРаЄ
    РађРађРаЎРацРа┤РбцРАцРацРацРаІРаЅРаЅРаЅРаЅРаЅРаЅРаЅРа│РаќРадРацРаХРадРаъРаЂРађРађРађ
        </div>
        
        <a href="https://github.com/duri-wip" class="contact-link" target="_blank">
            <i class="fab fa-github"></i>
            <span>GitHub</span>
        </a>
        
        
        <a href="mailto:8s.eow.ooc@gmail.com" class="contact-link">
            <i class="fas fa-envelope"></i>
            <span>Email</span>
        </a>
        
    </div>
    
</aside>
        
        <!-- вЕћВЮИ ВйўьЁљВИа -->
        <main class="main-content">
            <!-- ьЌцвЇћ -->
            <header class="header">
    <nav>
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="/">home</a>
            </li>
            <li class="nav-item">
                <a href="/categories">category</a>
            </li>
            <li class="nav-item">
                <a href="/study">study</a>
            </li>
            <li class="nav-item">
                <a href="/projects">project</a>
            </li>
        </ul>
    </nav>
</header>
            
            <!-- ВйўьЁљВИа ВўЂВЌГ -->
            <div class="content">
                <article class="post">
    <header class="post-header">
        <h1 class="post-title">LCEL (LangChain Expression Language) 1</h1>
        <div class="post-meta">
            <time class="post-date">2025вЁё 07ВЏћ 24ВЮ╝</time>
            
            <div class="post-categories">
                
                    
                    <span class="category-tag">ML-AI</span>
                    
                
                    
                
                
                <span class="subcategory-tag">llm</span>
                
            </div>
            
            
            <div class="post-tags">
                
                <span class="tag">#genai-llm</span>
                
                <span class="tag">#langchain</span>
                
                <span class="tag">#lcel</span>
                
                <span class="tag">#chain</span>
                
                <span class="tag">#ai</span>
                
                <span class="tag">#llm</span>
                
                <span class="tag">#python</span>
                
                <span class="tag">#genai</span>
                
                <span class="tag">#study-llm-framework</span>
                
            </div>
            
        </div>
    </header>

    <div class="post-content">
        <h1 id="lcelВЮ┤въђ">LCELВЮ┤въђ?</h1>

<p>LangChainВЌљВёю chainВЮё ЖхгВё▒ьЋўвіћ в░Ев▓ЋВъЁвІѕвІц. ьћёвАгьћёьіИвѓў LLMВЮё <code class="language-plaintext highlighter-rouge">|</code> вАю ВЌ░Ж▓░ьЋўВЌг ВъЉВё▒ьЋўЖ│а В▓ўвдгВЮў ВЌ░ВЄёвЦ╝ ЖхгВё▒ьЋювІц.</p>

<blockquote>
  <p>LCELВЌљВёювіћ ВЎю ьћёвАгьћёьіИ, вфевЇИ, ВЋёВЏЃьњІ ьїїВёювЊ▒ВЮё <code class="language-plaintext highlighter-rouge">|</code>(В▓┤ВЮИ)Вю╝вАю ВЌ░Ж▓░ьЋ┤Вёю ВІцьќЅьЋа Вѕў ВъѕВЮёЖ╣ї?</p>
</blockquote>

<p>вфевЊа ьЂ┤въўВіцЖ░ђ langchainВЮў <strong>Runnable</strong> ьЂ┤въўВіцвЦ╝ ВЃЂВєЇв░ЏЖ│а ВъѕЖИ░ вЋївгИВЮ┤вІц.
RunnableВЮё ВЌ░Ж▓░ьЋўвЕ┤ <strong>RunnableSequence</strong>Ж░ђ вљювІц. ВЮ┤ ВІюьђђВіцвЈё RunnableВЮў ВЮ╝ВбЁВЮ┤вІц.
RunnableSequenceвЦ╝ invokeьЋўвЕ┤ runnableВЮ┤ ВѕюВёювїђвАю invokeвљювІц.</p>

<h2 id="lcel-вѓ┤вХђ-Жхгьўё">LCEL вѓ┤вХђ Жхгьўё</h2>

<p>LCELВЮђ Вќ┤вќ╗Ж▓ї ЖхгьўёвљўВЌѕЖИИвъў В▓┤ВЮИВю╝вАю вфевЇИЖ│╝ ьћёвАгьћёьіИвЦ╝ ВЌ░Ж▓░ьЋа Вѕў ВъѕВЮёЖ╣ї?
<code class="language-plaintext highlighter-rouge">__or__</code>Ж│╝ <code class="language-plaintext highlighter-rouge">__ror__</code>Ж░ђ ВЮ┤ваЄЖ▓ї ЖхгьўёвљўВќ┤ ВъѕвІц:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">__or__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Runnable</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Other</span><span class="p">],</span>
                <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Other</span><span class="p">]],</span>
                <span class="n">Callable</span><span class="p">[</span><span class="n">Iterator</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Other</span><span class="p">]],</span>
                <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">Runnable</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span><span class="n">Other</span><span class="p">]],</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span><span class="n">Other</span><span class="p">],</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">RunnableSerializable</span><span class="p">[</span><span class="n">Input</span><span class="p">,</span> <span class="n">Other</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nc">RunnableSequence</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="n">self</span><span class="p">,</span> <span class="n">last</span><span class="o">=</span><span class="nf">coerce_to_runnable</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">__ror__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span>
    <span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Runnable</span><span class="p">[</span><span class="n">Other</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
                <span class="n">Callable</span><span class="p">[[</span><span class="n">Other</span><span class="p">],</span> <span class="n">Any</span><span class="p">]],</span>
                <span class="n">Callable</span><span class="p">[</span><span class="n">Iterator</span><span class="p">[</span><span class="n">Other</span><span class="p">],</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span>
                <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">Runnable</span><span class="p">[</span><span class="n">Other</span><span class="p">,</span><span class="n">Any</span><span class="p">]],</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Other</span><span class="p">],</span><span class="n">Any</span><span class="p">],</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">RunnableSerializable</span><span class="p">[</span><span class="n">Other</span><span class="p">,</span> <span class="n">Output</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nc">RunnableSequence</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="nf">coerce_to_runnable</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">last</span><span class="o">=</span><span class="n">self</span><span class="p">)</span>
</code></pre></div></div>

<p>ВЮ┤ ВЌ░Вѓ░ВъљвЊцВЮё ьєхьЋ┤ В▓┤ВЮИВЮё Вўцв▓ёвАювЊюьЋа Вѕў ВъѕвІц.</p>

<p>ЖиИвЪгвІѕЖ╣ї ВЏљвъўвЮ╝вЕ┤ Ж░ЂЖ░ЂВЮў вЪгвёѕвИћВЮё ВІцьќЅ(ьўИВХю)ьЋўвіћ в░Ев▓ЋВЮ┤ вІгвЮ╝, ВЮ┤ В╗┤ьЈгвёїьіИвЊцВЮё ВЌ░Ж▓░ьЋўвіћ В▓ўвдгвЦ╝ Ж░юв│ёВаЂВю╝вАю ЖхгьўёьЋ┤ВЋ╝ьЋўвіћвЇ░, LCELВЮё ВѓгВџЕьЋўвЕ┤ вфевЊа В╗┤ьЈгвёїьіИвЦ╝ <strong>ьєхВЮ╝вљю ВЮИьё░ьјўВЮ┤Віц</strong>вАю ьўИВХюьЋа Вѕў ВъѕЖ▓ї вљювІц. ВЮ┤Ж▓ї ВЌёВ▓Г ьјИвдгьЋе!!</p>

<h2 id="lcelВЮ┤-ьјИвдгьЋю-ВюаВіцВ╝ђВЮ┤Віц">LCELВЮ┤ ьјИвдгьЋю ВюаВіцВ╝ђВЮ┤Віц</h2>

<ul>
  <li>ьћёвАгьћёьіИ ьЁюьћївд┐ВЮё В▒ёВџ░Ж│а, ЖиИ Ж▓░Ж│╝вЦ╝ В▒Ќ вфевЇИВЌљ ВаюЖ│хьЋўЖ│а Ж▓░Ж│╝вЦ╝ ьїїВЮ┤ВЇг Ж░ЮВ▓┤вАю в│ђьЎўьЋўЖ│а ВІХвІц.</li>
  <li>ьћёвАгьћёьїЁВю╝вАю вІеЖ│ёв│ёвАю ВЃЮЖ░ЂьЋўЖ▓ї ьЋўЖ│а ЖиИ Ж▓░Ж│╝вЦ╝ ВџћВЋйьЋўЖ▓ї ьЋўЖ│а ВІХвІц</li>
  <li>ВХюваЦВЮё Вќ╗ВЮђ ьЏёВЌљ Вёюв╣ёВіц ВаЋВ▒ЁВЌљ Вюёв░ўвљўВДђ ВЋівіћВДђ ьЎЋВЮИьЋўЖ│а ВІХвІц</li>
  <li>ВХюваЦ Ж▓░Ж│╝вЦ╝ в░ћьЃЋВю╝вАю SQLВЮё ВІцьќЅьЋўВЌг вЇ░ВЮ┤ьё░вЦ╝ вХёВёЮьЋўЖ│а ВІХвІц.</li>
</ul>

<h1 id="ВѓгВџЕ-в░Ев▓Ћ">ВѓгВџЕ в░Ев▓Ћ</h1>

<h2 id="1-promptВЎђ-model-ВЌ░Ж▓░ьЋўЖИ░">1. PromptВЎђ Model ВЌ░Ж▓░ьЋўЖИ░</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">langchain_core.prompts</span> <span class="kn">import</span> <span class="n">ChatPromptTemplate</span>
<span class="kn">from</span> <span class="n">langchain_openai</span> <span class="kn">import</span> <span class="n">ChatOpenAI</span>

<span class="n">prompt</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="p">.</span><span class="nf">from_messages</span><span class="p">([</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">system</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">You are a helpful assistant that can answer questions.</span><span class="sh">"</span><span class="p">),</span>
    <span class="p">(</span><span class="sh">"</span><span class="s">human</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">{input}</span><span class="sh">"</span><span class="p">)</span>
<span class="p">])</span>

<span class="n">model</span> <span class="o">=</span> <span class="nc">ChatOpenAI</span><span class="p">(</span><span class="n">model</span> <span class="o">=</span> <span class="sh">"</span><span class="s">gpt-4o-mini</span><span class="sh">"</span><span class="p">,</span> <span class="n">temperature</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">)</span>

<span class="c1"># В▓┤ВЮИ ВЃЮВё▒
</span><span class="n">chain</span> <span class="o">=</span> <span class="n">prompt</span> <span class="o">|</span> <span class="n">model</span>

<span class="n">ai_message</span> <span class="o">=</span> <span class="n">chain</span><span class="p">.</span><span class="nf">invoke</span><span class="p">({</span><span class="sh">"</span><span class="s">input</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">What is the capital of France?</span><span class="sh">"</span><span class="p">})</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ai_message</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>въГВ▓┤ВЮИВЮё ВЋѕВЊ░віћ Ж▓йВџ░ВЎђ ьЂгЖ▓ї вІгвЮ╝в│┤ВЮ┤ВДђ ВЋівіћвІц. ЖиИваЄВДђвДї ьћёвАгьћёьіИЖ░ђ вІцВќЉьЋ┤ВДђЖ│а, ВЏїьЂгьћївАюВџ░Ж░ђ в│хВъАьЋ┤ВДђвіћ Ж▓йВџ░ВЌљвіћ ВЮ┤ ЖхгВА░Ж░ђ ВЋёВБ╝ ьјИвдгьЋ┤ВДёвІц.</li>
</ul>

<p>ВўѕвЦ╝ вЊцВќ┤в│┤Въљ.</p>

<h3 id="ВўѕВІю-prompt-model-pydantic-output-parser-ВЌ░Ж▓░ьЋўЖИ░">ВўѕВІю) Prompt, Model, Pydantic Output Parser ВЌ░Ж▓░ьЋўЖИ░</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">langchain_core.output_parsers</span> <span class="kn">import</span> <span class="n">PydanticOutputParser</span>
<span class="kn">from</span> <span class="n">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">List</span>

<span class="c1"># ВЮЉвІх ьўЋВІЮ вфевЇИ ВёцВаЋ
</span><span class="k">class</span> <span class="nc">Recipe</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">dish</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nc">Field</span><span class="p">(</span><span class="n">description</span> <span class="o">=</span> <span class="sh">"</span><span class="s">ве╣Ж│аВІХВЮђ ВЮїВІЮВЮў ВЮ┤вдё</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">recipe</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nc">Field</span><span class="p">(</span><span class="n">description</span> <span class="o">=</span> <span class="sh">"</span><span class="s">ВЮїВІЮВЮў Вџћвдгв▓Ћ</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">ingredient</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nc">Field</span><span class="p">(</span><span class="n">description</span> <span class="o">=</span> <span class="sh">"</span><span class="s">ьЋёВџћьЋю ВъгвБїВЮў вфЕвАЮ</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># ВЌ░ВЄё В▓ўвдгьЋа вХђвХё
</span><span class="n">prompt</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="p">.</span><span class="nf">from_messages</span><span class="p">([...])</span>

<span class="n">output_parser</span> <span class="o">=</span> <span class="nc">PydanticOutputParser</span><span class="p">(</span><span class="n">pydantic_object</span> <span class="o">=</span> <span class="n">Recipe</span><span class="p">)</span>
<span class="n">prompt_input</span> <span class="o">=</span> <span class="n">prompt</span><span class="p">.</span><span class="nf">partial</span><span class="p">(</span>
    <span class="n">format_instructions</span> <span class="o">=</span> <span class="n">output_parser</span><span class="p">.</span><span class="nf">get_format_instructions</span><span class="p">()</span>
<span class="p">)</span>

<span class="n">model</span> <span class="o">=</span> <span class="nc">ChatOpenAI</span><span class="p">(</span><span class="n">model</span> <span class="o">=</span> <span class="sh">"</span><span class="s">gpt-4o-mini</span><span class="sh">"</span><span class="p">,</span> <span class="n">temperature</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">).</span><span class="nf">bind</span><span class="p">(</span>
    <span class="n">response_format</span> <span class="o">=</span> <span class="p">{</span><span class="sh">"</span><span class="s">type</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">json_object</span><span class="sh">"</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">chain</span> <span class="o">=</span> <span class="n">prompt_input</span> <span class="o">|</span> <span class="n">model</span> <span class="o">|</span> <span class="n">output_parser</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">chain</span><span class="p">.</span><span class="nf">invoke</span><span class="p">({</span><span class="sh">"</span><span class="s">input</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">вІ╣Жи╝ В╣┤ваѕ</span><span class="sh">"</span><span class="p">})</span>
</code></pre></div></div>

<ul>
  <li>ВЮ┤ваЄЖ▓ї ьЋўвЕ┤ ВЌгвЪгЖ░юВЮў вЪгвёѕвИћвЈё Ж░ёвІеьЋўЖ▓ї ьЋюВцёвАю ВЌ░Ж▓░ьЋа Вѕў ВъѕвІц.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># вЈЎВЮ╝ьЋю ЖИ░віЦВЮё ьЋўвіћ Ж░ёвІеьЋю вІцвЦИ в░Ев▓Ћ
</span><span class="n">chain2</span> <span class="o">=</span> <span class="n">prompt</span> <span class="o">|</span> <span class="n">model</span><span class="p">.</span><span class="nf">with_structured_output</span><span class="p">(</span><span class="n">Recipe</span><span class="p">)</span>

<span class="n">output2</span> <span class="o">=</span> <span class="n">chain2</span><span class="p">.</span><span class="nf">invoke</span><span class="p">({</span><span class="sh">"</span><span class="s">input</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">ВќЉьїї В╣┤ваѕ</span><span class="sh">"</span><span class="p">})</span>
</code></pre></div></div>

<h2 id="2-lcelВЮў-Ж│аЖИЅ-ВЌ░Вѓ░ВъљвЊц">2. LCELВЮў Ж│аЖИЅ ВЌ░Вѓ░ВъљвЊц</h2>

<p><strong>RunnableParallel (в│Љваг ВІцьќЅ):</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">langchain_core.runnables</span> <span class="kn">import</span> <span class="n">RunnableParallel</span>

<span class="c1"># ВЌгвЪг ВъЉВЌЁВЮё вЈЎВІюВЌљ ВІцьќЅ
</span><span class="n">parallel_chain</span> <span class="o">=</span> <span class="nc">RunnableParallel</span><span class="p">(</span>
    <span class="n">summary</span><span class="o">=</span><span class="n">prompt</span> <span class="o">|</span> <span class="n">model</span> <span class="o">|</span> <span class="nc">StrOutputParser</span><span class="p">(),</span>
    <span class="n">keywords</span><span class="o">=</span><span class="n">keyword_prompt</span> <span class="o">|</span> <span class="n">model</span> <span class="o">|</span> <span class="nc">StrOutputParser</span><span class="p">(),</span>
    <span class="n">sentiment</span><span class="o">=</span><span class="n">sentiment_prompt</span> <span class="o">|</span> <span class="n">model</span> <span class="o">|</span> <span class="nc">StrOutputParser</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div></div>

<p><strong>RunnableLambda (ьЋеВѕў в│ђьЎў):</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">langchain_core.runnables</span> <span class="kn">import</span> <span class="n">RunnableLambda</span>

<span class="k">def</span> <span class="nf">format_input</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="sh">"</span><span class="s">input</span><span class="sh">"</span><span class="p">:</span> <span class="n">x</span><span class="p">.</span><span class="nf">upper</span><span class="p">()}</span>

<span class="n">chain</span> <span class="o">=</span> <span class="nc">RunnableLambda</span><span class="p">(</span><span class="n">format_input</span><span class="p">)</span> <span class="o">|</span> <span class="n">prompt</span> <span class="o">|</span> <span class="n">model</span>
</code></pre></div></div>

<p><strong>RunnableBranch (ВА░Ж▒┤вХђ вХёЖИ░):</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">langchain_core.runnables</span> <span class="kn">import</span> <span class="n">RunnableBranch</span>

<span class="n">chain</span> <span class="o">=</span> <span class="nc">RunnableBranch</span><span class="p">(</span>
    <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sh">"</span><span class="s">question</span><span class="sh">"</span> <span class="ow">in</span> <span class="n">x</span><span class="p">.</span><span class="nf">lower</span><span class="p">(),</span> <span class="n">question_chain</span><span class="p">),</span>
    <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sh">"</span><span class="s">summary</span><span class="sh">"</span> <span class="ow">in</span> <span class="n">x</span><span class="p">.</span><span class="nf">lower</span><span class="p">(),</span> <span class="n">summary_chain</span><span class="p">),</span>
    <span class="n">default_chain</span>  <span class="c1"># ЖИ░в│ИЖ░њ
</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="ВБ╝ВЮўьЋа-Ваљ--ВъЁВХюваЦ-ьЃђВъЁВЮ┤-ВЮ╝В╣ўьЋа-Ж▓Ѓ">ВБ╝ВЮўьЋа Ваљ : ВъЁВХюваЦ ьЃђВъЁВЮ┤ ВЮ╝В╣ўьЋа Ж▓Ѓ!</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ьЃђВъЁ вХѕВЮ╝В╣ў ВўѕВІю (ВЌљвЪг в░юВЃЮ)
</span><span class="n">prompt_returns_messages</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="p">.</span><span class="nf">from_template</span><span class="p">(</span><span class="sh">"</span><span class="s">Hello {name}</span><span class="sh">"</span><span class="p">)</span>
<span class="n">parser_expects_string</span> <span class="o">=</span> <span class="nc">StrOutputParser</span><span class="p">()</span>

<span class="c1"># Вўгв░ћвЦИ ВЌ░Ж▓░
</span><span class="n">chain</span> <span class="o">=</span> <span class="n">prompt_returns_messages</span> <span class="o">|</span> <span class="n">model</span> <span class="o">|</span> <span class="n">parser_expects_string</span>
</code></pre></div></div>

<p><strong>ВБ╝ВЮўВѓгьЋГ:</strong></p>

<ul>
  <li>ChatPromptTemplate Рєњ AIMessage Ж░ЮВ▓┤ ВХюваЦ</li>
  <li>StrOutputParser Рєњ AIMessage.content (string) ВХћВХю</li>
  <li>ВцЉЖ░ёВЌљ вфевЇИВЮ┤ AIMessage ВЃЮВё▒ьЋ┤ВЋ╝ ьЋе</li>
</ul>

    </div>

    <footer class="post-footer">
        <div class="post-nav">
            
            <a class="prev-post" href="/ml-ai/output-parse/">
                <span class="nav-label">ВЮ┤Ваё ЖИђ</span>
                <span class="nav-title">LangChain Output Parser</span>
            </a>
            
            
            
            <a class="next-post" href="/ml-ai/LCEL2/">
                <span class="nav-label">вІцВЮї ЖИђ</span>
                <span class="nav-title">LCEL (LangChain Expression ...</span>
            </a>
            
        </div>
        
        <div class="back-to-home">
            <a href="/">Рєљ ьЎѕВю╝вАю вЈїВЋёЖ░ђЖИ░</a>
        </div>
    </footer>
</article>
            </div>
        </main>
    </div>
</body>
</html>